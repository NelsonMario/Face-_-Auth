{"ast":null,"code":"import React,{useState,useEffect}from'react';import logo from\"./logo.svg\";import'./App.css';import Greet from'./components/Greet';import Welcome from'./components/Welcome';import Hello from'./components/Hello';import Message from'./components/Message';import Login from'./components/Login.js';import Axios from'axios';import*as ReactBootStrap from'react-bootstrap';import styles from'./styles/modal.module.css';import io from'socket.io-client';var URI='http://localhost:5000';var _ref=[500,375],videoWidth=_ref.videoWidth,videoHeight=_ref.videoHeight;var scriptLoaded=function scriptLoaded(socket,video){console.log('asd');// let src = new cv.Mat(video.height, video.width, cv.CV_8UC4);\n// let cap = new cv.VideoCapture(video);\n// const FPS = 22;\n// setInterval(() => {\n//   cap.read(src);\n//   var type = \"image/png\"\n//   var data = document.getElementById(\"canvasOutput\").toDataURL(type);\n//   data = data.replace('data:' + type + ';base64,', '');\n//   socket.emit('image', data);\n// }, 10000/FPS);\n// socket.on('response_back', function(image){\n//   const image_id = document.getElementById('image');\n//   image_id.src = image;\n// });\n};var mountScript=function mountScript(socket,video){var script=document.createElement(\"script\");script.src=process.env.PUBLIC_URL+'./opencv_js.wasm';script.async=true;script.onload=function(){return scriptLoaded(socket,video);};document.body.appendChild(script);};function App(){useEffect(function(){var socket=io(URI);socket.on('connect',function(){console.log(\"Connected...!\",socket.connected);});var video=document.querySelector(\"#videoElement\");video.width=videoWidth;video.height=videoHeight;if(navigator.mediaDevices.getUserMedia){navigator.mediaDevices.getUserMedia({video:true}).then(function(stream){video.srcObject=stream;video.play();}).catch(function(err0r){console.log(err0r);console.log(\"Something went wrong!\");});}// mountScript(socket, video)\n},[]);// const [initialData, setInitialData] = useState([{}])\n// const [initialData, setinitialData] = useState(null)\n// const [loading, setLoading] = useState(false)\n// const dataFunction = async () => {\n//   try{\n//     const data = await Axios\n//     .get(`video_feed`)\n//     .then(\n//       res => {\n//         console.log(res)\n//         setinitialData(res.data.username)\n//       }\n//     )\n//     setLoading(true)\n//   }catch(e){\n//     console.log(e)\n//   }\n// }\n// useEffect(() => {\n//   dataFunction()\n// }, [])\n// const [show, setShow] = useState(false);\n// const handleClose = () => setShow(false);\n// const handleShow = () => {\n//   dataFunction()\n//   setShow(true)\n// }\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"App\"},/*#__PURE__*/React.createElement(\"div\",{id:\"container\"},/*#__PURE__*/React.createElement(\"canvas\",{id:\"canvasOutput\"}),/*#__PURE__*/React.createElement(\"video\",{autoPlay:true,id:\"videoElement\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"video\"},/*#__PURE__*/React.createElement(\"img\",{id:\"image\"})));}export default App;","map":{"version":3,"sources":["E:/Project/WebProgramming/Face-_-Auth/src/App.js"],"names":["React","useState","useEffect","Greet","Welcome","Hello","Message","Login","Axios","ReactBootStrap","styles","io","URI","videoWidth","videoHeight","scriptLoaded","socket","video","console","log","mountScript","script","document","createElement","src","process","env","PUBLIC_URL","async","onload","body","appendChild","App","on","connected","querySelector","width","height","navigator","mediaDevices","getUserMedia","then","stream","srcObject","play","catch","err0r"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport Greet from './components/Greet'\r\nimport Welcome from './components/Welcome'\r\nimport Hello from './components/Hello'\r\nimport Message from './components/Message'\r\nimport Login from './components/Login.js'\r\nimport Axios from 'axios';\r\nimport * as ReactBootStrap from 'react-bootstrap'\r\nimport styles from './styles/modal.module.css'\r\nimport io from 'socket.io-client'\r\n\r\nconst URI = 'http://localhost:5000'\r\nconst {videoWidth, videoHeight} = [500, 375]\r\n\r\nconst scriptLoaded = (socket, video) => {\r\n  console.log('asd')\r\n  // let src = new cv.Mat(video.height, video.width, cv.CV_8UC4);\r\n  // let cap = new cv.VideoCapture(video);\r\n\r\n  // const FPS = 22;\r\n\r\n  // setInterval(() => {\r\n  //   cap.read(src);\r\n\r\n  //   var type = \"image/png\"\r\n  //   var data = document.getElementById(\"canvasOutput\").toDataURL(type);\r\n  //   data = data.replace('data:' + type + ';base64,', '');\r\n\r\n  //   socket.emit('image', data);\r\n  // }, 10000/FPS);\r\n\r\n  // socket.on('response_back', function(image){\r\n  //   const image_id = document.getElementById('image');\r\n  //   image_id.src = image;\r\n  // });\r\n}\r\n\r\nconst mountScript = (socket, video) => {\r\n  const script = document.createElement(\"script\");\r\n  script.src = process.env.PUBLIC_URL + './opencv_js.wasm'\r\n  script.async = true;\r\n  script.onload = () => scriptLoaded(socket, video);\r\n\r\n  document.body.appendChild(script);\r\n}\r\n\r\n\r\n\r\nfunction App() {\r\n  \r\n  useEffect(()=>{\r\n    var socket = io(URI)\r\n\r\n    socket.on('connect', function(){\r\n      console.log(\"Connected...!\", socket.connected)\r\n    })\r\n    \r\n    const video = document.querySelector(\"#videoElement\")\r\n    video.width = videoWidth;\r\n    video.height = videoHeight\r\n\r\n    \r\n    if (navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices.getUserMedia({ video: true })\r\n      .then(function (stream) {\r\n        video.srcObject = stream;\r\n        video.play();\r\n        })\r\n        .catch(function (err0r) {\r\n          console.log(err0r)\r\n          console.log(\"Something went wrong!\");\r\n        });\r\n      }\r\n      \r\n    // mountScript(socket, video)\r\n\r\n  }, [])\r\n  \r\n  // const [initialData, setInitialData] = useState([{}])\r\n  // const [initialData, setinitialData] = useState(null)\r\n  // const [loading, setLoading] = useState(false)\r\n\r\n\r\n  // const dataFunction = async () => {\r\n  //   try{\r\n  //     const data = await Axios\r\n  //     .get(`video_feed`)\r\n  //     .then(\r\n  //       res => {\r\n  //         console.log(res)\r\n  //         setinitialData(res.data.username)\r\n  //       }\r\n  //     )\r\n  //     setLoading(true)\r\n  //   }catch(e){\r\n  //     console.log(e)\r\n  //   }\r\n  // }\r\n\r\n  // useEffect(() => {\r\n  //   dataFunction()\r\n  // }, [])\r\n  // const [show, setShow] = useState(false);\r\n\r\n  // const handleClose = () => setShow(false);\r\n  // const handleShow = () => {\r\n  //   dataFunction()\r\n  //   setShow(true)\r\n  // }\r\n\r\n  return (\r\n    \r\n    <div className=\"App\">\r\n      {/* <Message/> */}\r\n      {/* <>\r\n        <ReactBootStrap.Button variant=\"primary\" onClick={handleShow}>\r\n          Login\r\n        </ReactBootStrap.Button>\r\n\r\n        <ReactBootStrap.Modal\r\n          show={show}\r\n          onHide={handleClose}\r\n          backdrop=\"static\"\r\n          keyboard={false}\r\n          centered\r\n        >\r\n          <ReactBootStrap.Modal.Header className={styles.modal}>\r\n            <ReactBootStrap.Modal.Title>Recognize your face</ReactBootStrap.Modal.Title>\r\n          </ReactBootStrap.Modal.Header>\r\n          <ReactBootStrap.Modal.Body className={styles.modal}>\r\n            <div>\r\n              See your webcam\r\n            </div>\r\n            <div>\r\n              {\r\n                loading ? (initialData) : \r\n                <ReactBootStrap.Spinner animation=\"grow\" />\r\n              }\r\n            </div>\r\n          </ReactBootStrap.Modal.Body>\r\n          <ReactBootStrap.Modal.Footer>\r\n            <ReactBootStrap.Button variant=\"secondary\" onClick={handleClose}>\r\n              Close\r\n            </ReactBootStrap.Button>\r\n          </ReactBootStrap.Modal.Footer>\r\n        </ReactBootStrap.Modal>\r\n      </> */}\r\n      {/* <Greet name = \"Nelson\" food = \"steak\">\r\n        <p>This is children props</p>\r\n      </Greet> */}\r\n      {/* <Greet name = {initialData.username} food = \"ice cream\"/> */}\r\n      {/* <Welcome name = \"Nelson\" food = \"steak\"/>  */}\r\n      {/* <Welcome name = \"Mario\" food = \"ice cream\"/>  */}\r\n      {/* <Hello /> */}\r\n      {/* <Login/> */}\r\n      <div id=\"container\">\r\n        <canvas id=\"canvasOutput\"></canvas>\r\n        <video autoPlay={true} id=\"videoElement\"></video>\r\n      </div>\r\n      <div className = 'video'>\r\n        <img id=\"image\"></img>\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}