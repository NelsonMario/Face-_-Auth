{"ast":null,"code":"var _jsxFileName = \"E:\\\\Project\\\\WebProgramming\\\\Face-_-Auth\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport logo from \"./logo.svg\";\nimport './App.css';\nimport Greet from './components/Greet';\nimport Welcome from './components/Welcome';\nimport Hello from './components/Hello';\nimport Message from './components/Message';\nimport Login from './components/Login.js';\nimport Axios from 'axios';\nimport * as ReactBootStrap from 'react-bootstrap';\nimport styles from './styles/modal.module.css';\nimport io from 'socket.io-client';\nconst URI = 'http://localhost:5000';\n\nconst scriptLoaded = (socket, video) => {\n  const FPS = 22;\n  var canvas = document.getElementById('canvasOutput');\n  var context = canvas.getContext('2d');\n  canvas.width = 500;\n  canvas.height = 500;\n  setInterval(() => {\n    context.drawImage(video, 0, 0);\n    var type = \"image/png\";\n    var data = document.getElementById(\"canvasOutput\").toDataURL(type);\n    data = data.replace('data:' + type + ';base64,', '');\n    socket.emit('image', data);\n  }, 10000 / FPS);\n  socket.on('response_back', function (image) {\n    const image_id = document.getElementById('image');\n    image_id.src = image;\n  });\n  socket.on('response_user', function (response_user) {\n    const user = document.getElementById('user');\n    user.innerHTML = response_user;\n  });\n};\n\nconst mountScript = (socket, video) => {\n  const script = document.createElement(\"script\");\n  script.src = process.env.PUBLIC_URL + '/opencv.js';\n  script.async = true;\n\n  script.onload = () => scriptLoaded(socket, video);\n\n  document.body.appendChild(script);\n};\n\nfunction App() {\n  useEffect(() => {\n    var socket = io(URI);\n    socket.on('connect', function () {\n      console.log(\"Connected...!\", socket.connected);\n    });\n    const video = document.querySelector(\"#videoElement\");\n\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(function (stream) {\n        video.srcObject = stream;\n      }).catch(function (err0r) {\n        console.log(\"Something went wrong!\");\n      });\n    } else if (navigator.getUserMedia) {\n      // Standard\n      navigator.getUserMedia({\n        video: true\n      }, function (stream) {\n        video.src = stream;\n        video.play();\n      });\n    } else if (navigator.webkitGetUserMedia) {\n      // WebKit-prefixed\n      navigator.webkitGetUserMedia({\n        video: true\n      }, function (stream) {\n        video.src = window.webkitURL.createObjectURL(stream);\n        video.play();\n      });\n    } else if (navigator.mozGetUserMedia) {\n      // Mozilla-prefixed\n      navigator.mozGetUserMedia({\n        video: true\n      }, function (stream) {\n        video.srcObject = stream;\n        video.play();\n      });\n    }\n\n    mountScript(socket, video);\n  }, []); // const [initialData, setInitialData] = useState([{}])\n  // const [initialData, setinitialData] = useState(null)\n  // const [loading, setLoading] = useState(false)\n  // const dataFunction = async () => {\n  //   try{\n  //     const data = await Axios\n  //     .get(`video_feed`)\n  //     .then(\n  //       res => {\n  //         console.log(res)\n  //         setinitialData(res.data.username)\n  //       }\n  //     )\n  //     setLoading(true)\n  //   }catch(e){\n  //     console.log(e)\n  //   }\n  // }\n  // useEffect(() => {\n  //   dataFunction()\n  // }, [])\n  // const [show, setShow] = useState(false);\n  // const handleClose = () => setShow(false);\n  // const handleShow = () => {\n  //   dataFunction()\n  //   setShow(true)\n  // }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    className: styles.modal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    id: \"canvasOutput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"video\", {\n    autoPlay: true,\n    width: 600,\n    height: 800,\n    id: \"videoElement\",\n    hidden: 'hidden',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video\",\n    hidden: 'hidden',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    id: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"h1\", {\n    id: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }));\n}\n\nexport default App;","map":{"version":3,"sources":["E:/Project/WebProgramming/Face-_-Auth/src/App.js"],"names":["React","useState","useEffect","Greet","Welcome","Hello","Message","Login","Axios","ReactBootStrap","styles","io","URI","scriptLoaded","socket","video","FPS","canvas","document","getElementById","context","getContext","width","height","setInterval","drawImage","type","data","toDataURL","replace","emit","on","image","image_id","src","response_user","user","innerHTML","mountScript","script","createElement","process","env","PUBLIC_URL","async","onload","body","appendChild","App","console","log","connected","querySelector","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","err0r","play","webkitGetUserMedia","window","webkitURL","createObjectURL","mozGetUserMedia","modal"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport logo from './logo.svg';\r\nimport './App.css';\r\nimport Greet from './components/Greet'\r\nimport Welcome from './components/Welcome'\r\nimport Hello from './components/Hello'\r\nimport Message from './components/Message'\r\nimport Login from './components/Login.js'\r\nimport Axios from 'axios';\r\nimport * as ReactBootStrap from 'react-bootstrap'\r\nimport styles from './styles/modal.module.css'\r\nimport io from 'socket.io-client'\r\n\r\nconst URI = 'http://localhost:5000'\r\n\r\n\r\n\r\nconst scriptLoaded = (socket, video) => {\r\n\r\n\r\n    const FPS = 22\r\n    \r\n    var canvas = document.getElementById('canvasOutput')\r\n    var context = canvas.getContext('2d')\r\n    canvas.width = 500\r\n    canvas.height = 500\r\n\r\n    setInterval(() => {\r\n      \r\n      context.drawImage(video, 0, 0)\r\n      \r\n      var type = \"image/png\"\r\n      var data = document.getElementById(\"canvasOutput\").toDataURL(type);\r\n      data = data.replace('data:' + type + ';base64,', '');\r\n      socket.emit('image', data);\r\n    }, 10000/FPS);\r\n  \r\n    socket.on('response_back', function(image){\r\n      const image_id = document.getElementById('image');\r\n      image_id.src = image;\r\n    });\r\n\r\n    socket.on('response_user', function(response_user){\r\n      const user = document.getElementById('user')\r\n      user.innerHTML = response_user\r\n    })\r\n}\r\n\r\nconst mountScript = (socket, video) => {\r\n  const script = document.createElement(\"script\");\r\n  script.src = process.env.PUBLIC_URL + '/opencv.js'\r\n  script.async = true;\r\n  script.onload = () => scriptLoaded(socket, video);\r\n\r\n  document.body.appendChild(script);\r\n}\r\n\r\n\r\n\r\nfunction App() {\r\n  \r\n  useEffect(()=>{\r\n    var socket = io(URI)\r\n\r\n    socket.on('connect', function(){\r\n      console.log(\"Connected...!\", socket.connected)\r\n    })\r\n    \r\n    const video = document.querySelector(\"#videoElement\")\r\n    \r\n\r\n    \r\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n      navigator.mediaDevices.getUserMedia({ video: true })\r\n        .then(function (stream) {\r\n          video.srcObject = stream;\r\n        })\r\n        .catch(function (err0r) {\r\n          console.log(\"Something went wrong!\");\r\n        });\r\n    }\r\n    else if(navigator.getUserMedia) { // Standard\r\n      navigator.getUserMedia({ video: true }, function(stream) {\r\n          video.src = stream;\r\n          video.play();\r\n      });\r\n  } else if(navigator.webkitGetUserMedia) { // WebKit-prefixed\r\n      navigator.webkitGetUserMedia({ video: true }, function(stream){\r\n          video.src = window.webkitURL.createObjectURL(stream);\r\n          video.play();\r\n      });\r\n  } else if(navigator.mozGetUserMedia) { // Mozilla-prefixed\r\n      navigator.mozGetUserMedia({ video: true }, function(stream){\r\n          video.srcObject = stream;\r\n          video.play();\r\n      });\r\n  }\r\n    \r\n\r\n    mountScript(socket, video)\r\n\r\n  }, [])\r\n  \r\n  // const [initialData, setInitialData] = useState([{}])\r\n  // const [initialData, setinitialData] = useState(null)\r\n  // const [loading, setLoading] = useState(false)\r\n\r\n\r\n  // const dataFunction = async () => {\r\n  //   try{\r\n  //     const data = await Axios\r\n  //     .get(`video_feed`)\r\n  //     .then(\r\n  //       res => {\r\n  //         console.log(res)\r\n  //         setinitialData(res.data.username)\r\n  //       }\r\n  //     )\r\n  //     setLoading(true)\r\n  //   }catch(e){\r\n  //     console.log(e)\r\n  //   }\r\n  // }\r\n\r\n  // useEffect(() => {\r\n  //   dataFunction()\r\n  // }, [])\r\n  // const [show, setShow] = useState(false);\r\n\r\n  // const handleClose = () => setShow(false);\r\n  // const handleShow = () => {\r\n  //   dataFunction()\r\n  //   setShow(true)\r\n  // }\r\n\r\n  return (\r\n    \r\n    <div className=\"App\">\r\n      {/* <Message/> */}\r\n      {/* <>\r\n        <ReactBootStrap.Button variant=\"primary\" onClick={handleShow}>\r\n          Login\r\n        </ReactBootStrap.Button>\r\n\r\n        <ReactBootStrap.Modal\r\n          show={show}\r\n          onHide={handleClose}\r\n          backdrop=\"static\"\r\n          keyboard={false}\r\n          centered\r\n        >\r\n          <ReactBootStrap.Modal.Header className={styles.modal}>\r\n            <ReactBootStrap.Modal.Title>Recognize your face</ReactBootStrap.Modal.Title>\r\n          </ReactBootStrap.Modal.Header>\r\n          <ReactBootStrap.Modal.Body className={styles.modal}>\r\n            <div>\r\n              See your webcam\r\n            </div>\r\n            <div>\r\n              {\r\n                loading ? (initialData) : \r\n                <ReactBootStrap.Spinner animation=\"grow\" />\r\n              }\r\n            </div>\r\n          </ReactBootStrap.Modal.Body>\r\n          <ReactBootStrap.Modal.Footer>\r\n            <ReactBootStrap.Button variant=\"secondary\" onClick={handleClose}>\r\n              Close\r\n            </ReactBootStrap.Button>\r\n          </ReactBootStrap.Modal.Footer>\r\n        </ReactBootStrap.Modal>\r\n      </> */}\r\n      {/* <Greet name = \"Nelson\" food = \"steak\">\r\n        <p>This is children props</p>\r\n      </Greet> */}\r\n      {/* <Greet name = {initialData.username} food = \"ice cream\"/> */}\r\n      {/* <Welcome name = \"Nelson\" food = \"steak\"/>  */}\r\n      {/* <Welcome name = \"Mario\" food = \"ice cream\"/>  */}\r\n      {/* <Hello /> */}\r\n      {/* <Login/> */}\r\n      <div id=\"container\" className={styles.modal}>\r\n        <canvas id=\"canvasOutput\"></canvas>\r\n        <video autoPlay={true} width={600} height={800} id=\"videoElement\" hidden = {'hidden'} ></video>\r\n      </div>\r\n      <div className = 'video' hidden = {'hidden'}>\r\n        <img id=\"image\"></img>\r\n      </div>\r\n    <h1 id=\"user\"></h1>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}