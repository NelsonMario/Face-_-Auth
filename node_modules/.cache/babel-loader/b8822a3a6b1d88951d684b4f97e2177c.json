{"ast":null,"code":"var _jsxFileName = \"E:\\\\Project\\\\WebProgramming\\\\Face-_-Auth\\\\src\\\\components\\\\Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport Axios from 'axios';\nimport * as ReactBootStrap from 'react-bootstrap';\nimport styles from '../styles/modal.module.css';\nimport Message from './Message.js';\nimport OTP from './OTP.js';\nimport io from 'socket.io-client';\n\nconst onResponseBack = socket => {\n  socket.on('response_back', function (image) {\n    const image_id = document.getElementById('image');\n    image_id.src = image;\n  });\n};\n\nconst onResponseUser = (socket, stream, getFrame) => {\n  socket.on('response_user', function (response_user) {\n    const user = document.getElementById('user');\n    user.innerHTML = response_user;\n\n    if (response_user.length > 0) {\n      clearInterval(getFrame);\n      stream.getTracks()[0].stop();\n      socket.off();\n    }\n  });\n};\n\nconst onConnect = socket => {\n  socket.on('connect', function () {\n    console.log(\"Connected...!\", socket.connected);\n  });\n};\n\nconst recognizeUser = (socket, stream, video) => {\n  const FPS = 22;\n  const X = 0,\n        Y = 0;\n  const TIME = 10000;\n  var canvas = document.getElementById('canvasOutput');\n  var context = canvas.getContext('2d');\n  canvas.width = 500;\n  canvas.height = 500;\n  var getFrame = setInterval(() => {\n    context.drawImage(video, X, Y);\n    var type = \"image/png\";\n    var data = document.getElementById(\"canvasOutput\").toDataURL(type);\n    data = data.replace('data:' + type + ';base64,', '');\n    socket.emit('image', data);\n  }, TIME / FPS);\n  onResponseBack(socket);\n  onResponseUser(socket, stream, getFrame);\n}; // const [initialData, setInitialData] = useState([{}])\n// const [initialData, setinitialData] = useState(null)\n// const [loading, setLoading] = useState(false)\n// const dataFunction = async () => {\n//   try{\n//     const data = await Axios\n//     .get(`video_feed`)\n//     .then(\n//       res => {\n//         console.log(res)\n//         setinitialData(res.data.username)\n//       }\n//     )\n//     setLoading(true)\n//   }catch(e){\n//     console.log(e)\n//   }\n// }\n// useEffect(() => {\n//   dataFunction()\n// }, [])\n// const [show, setShow] = useState(false);\n// const handleClose = () => setShow(false);\n// const handleShow = () => {\n//   dataFunction()\n//   setShow(true)\n// }\n\n\nfunction Login() {\n  const URI = 'http://localhost:5000';\n  useEffect(() => {\n    var socket = io(URI);\n    var localStream;\n    onConnect(socket);\n    const video = document.querySelector(\"#videoElement\");\n\n    if (navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices.getUserMedia({\n        video: true\n      }).then(function (stream) {\n        localStream = stream;\n        console.log(stream);\n        video.srcObject = localStream;\n      }).catch(function (err0r) {\n        console.log(\"Something went wrong!\");\n      });\n    }\n\n    console.log(localStream);\n    recognizeUser(socket, localStream, video);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    className: styles.modal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"canvas\", {\n    id: \"canvasOutput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"video\", {\n    autoPlay: true,\n    width: 600,\n    height: 800,\n    id: \"videoElement\",\n    hidden: 'hidden',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"video\",\n    hidden: 'hidden',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    id: \"image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"h1\", {\n    id: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }\n  }));\n}\n\nexport default Login;","map":{"version":3,"sources":["E:/Project/WebProgramming/Face-_-Auth/src/components/Login.js"],"names":["React","useState","useEffect","Axios","ReactBootStrap","styles","Message","OTP","io","onResponseBack","socket","on","image","image_id","document","getElementById","src","onResponseUser","stream","getFrame","response_user","user","innerHTML","length","clearInterval","getTracks","stop","off","onConnect","console","log","connected","recognizeUser","video","FPS","X","Y","TIME","canvas","context","getContext","width","height","setInterval","drawImage","type","data","toDataURL","replace","emit","Login","URI","localStream","querySelector","navigator","mediaDevices","getUserMedia","then","srcObject","catch","err0r","modal"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Axios from 'axios';\r\nimport * as ReactBootStrap from 'react-bootstrap'\r\nimport styles from '../styles/modal.module.css'\r\nimport Message from './Message.js'\r\nimport OTP from './OTP.js'\r\nimport io from 'socket.io-client'\r\n\r\n\r\n\r\nconst onResponseBack = (socket) => {\r\n    socket.on('response_back', function(image){\r\n        const image_id = document.getElementById('image');\r\n        image_id.src = image;\r\n    });\r\n}\r\n\r\nconst onResponseUser = (socket, stream, getFrame) => {\r\n    socket.on('response_user', function(response_user){\r\n        const user = document.getElementById('user')\r\n        user.innerHTML = response_user\r\n        if(response_user.length > 0){\r\n            clearInterval(getFrame)\r\n            stream.getTracks()[0].stop()\r\n            socket.off()\r\n        }\r\n    })\r\n}\r\n\r\nconst onConnect = (socket) => {\r\n    socket.on('connect', function(){\r\n        console.log(\"Connected...!\", socket.connected)\r\n    })\r\n}\r\n\r\nconst recognizeUser = (socket, stream, video) => {\r\n\r\n    const FPS = 22\r\n    const X = 0, Y = 0\r\n    const TIME = 10000\r\n\r\n    var canvas = document.getElementById('canvasOutput')\r\n    var context = canvas.getContext('2d')\r\n\r\n    canvas.width = 500\r\n    canvas.height = 500\r\n\r\n    var getFrame = setInterval(() => {\r\n        context.drawImage(video, X, Y)\r\n        var type = \"image/png\"\r\n        var data = document.getElementById(\"canvasOutput\").toDataURL(type);\r\n        data = data.replace('data:' + type + ';base64,', '');\r\n        socket.emit('image', data);\r\n    }, TIME/FPS);\r\n\r\n    \r\n    onResponseBack(socket)\r\n    onResponseUser(socket, stream, getFrame)\r\n    \r\n}\r\n\r\n\r\n\r\n  // const [initialData, setInitialData] = useState([{}])\r\n  // const [initialData, setinitialData] = useState(null)\r\n  // const [loading, setLoading] = useState(false)\r\n\r\n\r\n  // const dataFunction = async () => {\r\n  //   try{\r\n  //     const data = await Axios\r\n  //     .get(`video_feed`)\r\n  //     .then(\r\n  //       res => {\r\n  //         console.log(res)\r\n  //         setinitialData(res.data.username)\r\n  //       }\r\n  //     )\r\n  //     setLoading(true)\r\n  //   }catch(e){\r\n  //     console.log(e)\r\n  //   }\r\n  // }\r\n\r\n  // useEffect(() => {\r\n  //   dataFunction()\r\n  // }, [])\r\n  // const [show, setShow] = useState(false);\r\n\r\n  // const handleClose = () => setShow(false);\r\n  // const handleShow = () => {\r\n  //   dataFunction()\r\n  //   setShow(true)\r\n  // }\r\n\r\nfunction Login(){\r\n    const URI = 'http://localhost:5000'\r\n\r\n    useEffect(()=>{\r\n        var socket = io(URI)\r\n        var localStream\r\n        onConnect(socket)\r\n        \r\n        const video = document.querySelector(\"#videoElement\")\r\n        \r\n        if (navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n            .then(function (stream) {\r\n                localStream = stream\r\n                console.log(stream)\r\n                video.srcObject = localStream\r\n            })\r\n            .catch(function (err0r) {\r\n                console.log(\"Something went wrong!\");\r\n            });\r\n        }\r\n        console.log(localStream)\r\n        recognizeUser(socket, localStream, video)\r\n    \r\n    }, [])\r\n    \r\n    return (\r\n        <div className=\"App\">\r\n            {/* <>\r\n                <ReactBootStrap.Button variant=\"primary\" onClick={handleShow}>\r\n                Login\r\n                </ReactBootStrap.Button>\r\n\r\n                <ReactBootStrap.Modal\r\n                    show={show}\r\n                    onHide={handleClose}\r\n                    backdrop=\"static\"\r\n                    keyboard={false}\r\n                    centered\r\n                >\r\n                <ReactBootStrap.Modal.Header className={styles.modal}>\r\n                    <ReactBootStrap.Modal.Title>Recognize your face</ReactBootStrap.Modal.Title>\r\n                </ReactBootStrap.Modal.Header>\r\n                <ReactBootStrap.Modal.Body className={styles.modal}>\r\n                    <div>\r\n                        {\r\n                            loading ? 'Completed' : 'See your webcam' \r\n                        }\r\n                    \r\n                    </div>\r\n                    <div>\r\n                        {\r\n                            loading ? <OTP name = {initialData}/> : \r\n                            <ReactBootStrap.Spinner animation=\"grow\" />\r\n                        }\r\n                    </div>\r\n                    \r\n                </ReactBootStrap.Modal.Body>\r\n                <ReactBootStrap.Modal.Footer>\r\n                    <ReactBootStrap.Button variant=\"secondary\" onClick={handleClose}>\r\n                    Close\r\n                    </ReactBootStrap.Button>\r\n                </ReactBootStrap.Modal.Footer>\r\n                </ReactBootStrap.Modal>\r\n            </> */}\r\n            <div id=\"container\" className={styles.modal}>\r\n                <canvas id=\"canvasOutput\"></canvas>\r\n                <video autoPlay={true} width={600} height={800} id=\"videoElement\" hidden = {'hidden'} ></video>\r\n            </div>\r\n            <div className = 'video' hidden = {'hidden'}>\r\n                <img id=\"image\"></img>\r\n            </div>\r\n            <h1 id=\"user\"></h1>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}